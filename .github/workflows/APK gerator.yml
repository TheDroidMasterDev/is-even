name: Gerador de APK - Is-Even Torture Edition

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout do código
      uses: actions/checkout@v4  # <--- Atualizado!

    - name: Configurar Node.js
      uses: actions/setup-node@v4 # <--- Atualizado para garantir
      with:
        node-version: 18

    - name: Gerar o Monstro de 30.000 linhas
      run: |
        node generator.js
        echo "O arquivo is-even.js foi gerado com sucesso."

    - name: Build APK (Simulação de Compilação)
      run: |
        mkdir -p build
        echo "Empacotando perguntas do Beethoven e 30k else-ifs..." > build/log.txt
        # Se você já tem o código do APK, ele seria copiado aqui
        cp is-even.js build/

    - name: Upload do Artefato
      uses: actions/upload-artifact@v4 # <--- O culpado do erro era esse!
      with:
        name: is-even-torture-package
        path: build/
        
