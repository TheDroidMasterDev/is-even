name: Release do Suplicio - Is-Even Torture

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  release:
    runs-on: ubuntu-latest
    permissions:
      contents: write # NecessÃ¡rio para criar a Release

    steps:
    - name: Checkout do cÃ³digo
      uses: actions/checkout@v4

    - name: Configurar Node.js
      uses: actions/setup-node@v4
      with:
        node-version: 18

    - name: Validar o index.js Gigante
      run: |
        node index.js || echo "O script rodou (ou pelo menos tentou responder o Beethoven)"
        mkdir -p dist
        # O arquivo que as pessoas vÃ£o baixar
        cp index.js dist/is-even-ultimate-edition.js
        echo "Cultura exigida: Beethoven (26 anos apÃ³s surdez)" > dist/LEIA-ME.txt

    - name: Criar Release Oficial
      uses: softprops/action-gh-release@v1
      with:
        tag_name: v1.0.${{ github.run_number }}
        name: Release v1.0.${{ github.run_number }} - The Beethoven Update
        body: |
          ### ðŸš€ Novidades desta versÃ£o:
          * Adicionadas 30.000 linhas de pura eficiÃªncia (SQN).
          * Sistema de validaÃ§Ã£o cultural via Beethoven.
          * Suporte exclusivo para os nÃºmeros 1, 2 e 3.
          * Bug fix: O nÃºmero 4 agora Ã© ignorado por ser muito complexo.
        files: |
          dist/is-even-ultimate-edition.js
          dist/LEIA-ME.txt
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        
